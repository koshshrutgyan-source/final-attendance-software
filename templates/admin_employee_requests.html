<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Employee Requests</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background:#f4f6f9; margin:0; padding:0;}
        .container { max-width: 900px; margin: 50px auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);}
        h2 { margin-top:0; color:#333; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px;}
        th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: left;}
        th { background: #007BFF; color: white;}
        tr:hover { background:#f1f1f1; }
        a { text-decoration:none; color:#007BFF; font-weight:600; }
        .btn { padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;}
        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-danger:hover { background: #c82333; }
        .no-requests { text-align: center; margin-top: 30px; color: #666; font-style: italic; }
    </style>
</head>
<body>

<div class="container">
    <h2>Employee Requests</h2>
    <p><a href="{{ url_for('admin_employees') }}">&larr; Back to Admin Dashboard</a></p>

    {% if requests %}
        <table class="table">
            <thead>
                <tr>
                    <th>Employee Name</th>
                    <th>Employee ID</th>
                    <th>Type</th>
                    <th>Message</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for req in requests %}
                <tr>
                <td>{{ req.employee.name if req.employee else 'N/A' }}</td>
<td>{{ req.employee.emp_id if req.employee else 'N/A' }}</td>
                    <td>{{ req.request_type }}</td>
                    <td>{{ req.message }}</td>
                    <td>{{ req.status }}</td>
                    <td>
                        {% if req.status == 'Pending' %}
                        <form action="{{ url_for('update_employee_request_status', request_id=req.id, new_status='Approved') }}" method="POST" style="display:inline;">
                            <button type="submit" class="btn btn-success btn-sm">Approve</button>
                        </form>
                        <form action="{{ url_for('update_employee_request_status', request_id=req.id, new_status='Declined') }}" method="POST" style="display:inline;">
                            <button type="submit" class="btn btn-danger btn-sm">Decline</button>
                        </form>
                        {% else %}
                        <span class="text-muted">No action</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-requests">No requests submitted yet.</p>
    {% endif %}
</div>

</body>
</html>